(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"068e":function(e,t,a){},5985:function(e,t,a){"use strict";var s=a("068e"),n=a.n(s);n.a},8642:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bg-primary fixed installer flex flex-center"},[a("div",{staticClass:"wrapper full-width q-px-lg column",staticStyle:{"max-width":"1200px"}},[a("q-banner",{staticClass:"bg-primary text-white"},[a("span",{staticClass:"text-h5"},[e._v(" winwin-hexo-editor ")])]),a("q-stepper",{ref:"stepper",staticClass:"col",attrs:{color:"primary","header-nav":"",animated:"",flat:"",contracted:e.$q.screen.lt.sm},scopedSlots:e._u([{key:"navigation",fn:function(){return[a("q-stepper-navigation",[a("q-btn",{attrs:{stretch:"",color:"primary",label:5===e.step?"完成":"下一步",disable:5===e.step&&!e.isAllValid},on:{click:function(t){5===e.step?e.doInstall():e.$refs.stepper.next()}}}),e.step>1?a("q-btn",{staticClass:"q-ml-sm",attrs:{stretch:"",flat:"",color:"primary",label:"上一步"},on:{click:function(t){return e.$refs.stepper.previous()}}}):e._e()],1)]},proxy:!0},{key:"message",fn:function(){return[2===e.step?a("q-banner",{staticClass:"bg-blue text-white q-px-lg",scopedSlots:e._u([{key:"avatar",fn:function(){return[a("q-icon",{attrs:{name:"security",color:"white"}})]},proxy:!0}],null,!1,158030015)},[e._v("\n          为了安全考虑请使用和其他应用不同的密码！\n        ")]):5!==e.step||e.isAllValid?e._e():a("q-banner",{staticClass:"bg-red text-white q-px-lg",scopedSlots:e._u([{key:"avatar",fn:function(){return[a("q-icon",{attrs:{name:"warning",color:"white"}})]},proxy:!0}])},[e._v("\n          检测到了一些问题，请更改后再试\n        ")])]},proxy:!0}]),model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("q-step",{attrs:{name:1,title:"欢迎",icon:"flag",done:e.step>1}},[a("q-markdown",{staticClass:"q-py-xl",attrs:{src:e.welcomemd}})],1),a("q-step",{attrs:{name:2,title:"用户",icon:"person",error:!e.isValid(e.step2)&&e.step>2,done:e.step>2}},[a("div",{staticClass:"input-wrapper"},[e._l(e.step2,(function(t){return a("q-input",{key:t.key,staticClass:"stepper-input",attrs:{type:"text",label:t.label,rules:t.rules,"stack-label":"",filled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})})),a("q-markdown",{staticClass:"col",attrs:{src:e.usermd}})],2)]),a("q-step",{attrs:{name:3,title:"博客",icon:"book",error:!e.isValid(e.step3)&&e.step>3,done:e.step>2}},[a("div",{staticClass:"input-wrapper"},[e._l(e.step3,(function(t){return a("q-input",{key:t.key,staticClass:"stepper-input",attrs:{type:"text",label:t.label,rules:t.rules,"stack-label":"",filled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})})),a("q-markdown",{staticClass:"col",attrs:{src:e.hexomd}})],2)]),a("q-step",{attrs:{name:4,title:"安全",icon:"security"}},[a("div",{staticClass:"input-wrapper"},[e._l(e.step4,(function(t){return a("q-input",{key:t.key,staticClass:"stepper-input",attrs:{type:"text",label:t.label,rules:t.rules,"stack-label":"",filled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})})),a("q-markdown",{staticClass:"col",attrs:{src:e.securitymd}})],2)]),a("q-step",{attrs:{name:5,title:"确认",icon:"done"}},[e.isAllValid?[a("div",{staticClass:"input-wrapper"},[a("div",{staticClass:"text-h6 q-mb-lg"},[e._v("以下是你的设置")]),e._l(e.checkInfo,(function(t){return a("q-input",{key:t.key,staticClass:"stepper-input",attrs:{type:"text",label:t.label,"stack-label":"",filled:"",disable:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})}))],2)]:[a("div",{staticClass:"q-py-xl text-red text-bold"},[a("q-icon",{staticClass:"q-mr-sm",attrs:{name:"close",size:"xx-large"}}),a("span",[e._v("表单验证失败")])],1)]],2)],1)],1)])},n=[],l=a("967e"),r=a.n(l),i=(a("96cf"),a("fa84")),o=a.n(i),c="# 欢迎使用\n\n在使用编辑器之前仍需要一些配置\n\n您可以查看[安装指南](https://winwin_2011.gitee.io/winwin-hexo-editor/guide/)和[FAQ](https://winwin_2011.gitee.io/winwin-hexo-editor/support/)获取更多帮助\n",u="用户名和密码用于登录编辑器，您可以稍后在设置中更改。为了安全考虑请**使用和其他应用不同的密码**！\n",p="此目录应该是你的hexo博客的路径，相对路径或者绝对路径均可，这应该是hexo的`config.yml`文件所在目录\n\n此项在完成安装后仍可以在设置中更改\n",d="以上两项是加密所用密钥，可选，但强烈建议更改为自己喜欢的随机值\n\n此项在完成安装后仍可以在设置中更改\n",f=a("3fa5"),m=a("b09d"),v=a("f508"),b={name:"Install",data:function(){return{welcomemd:c,usermd:u,hexomd:p,securitymd:d,step:1,validHexoRoot:!0,serverHexoRoot:"",step2:[{key:"username",label:"用户名（必填）",value:"",rules:[function(e){return!!e||"必填项"}]},{key:"password",label:"密码（必填）",value:"",rules:[function(e){return!!e||"必填项"}]}],step3:[{key:"HEXO_ROOT",label:"博客相对目录（必填）",value:"",rules:[function(e){return!!e||"必填项"}]}],step4:[{key:"JWT_SECRET",label:"JWT_SECRET",value:""},{key:"APIKEY_SECRET",label:"APIKEY_SECRET",value:""}]}},computed:{allConfig:function(){return this.step2.concat(this.step3).concat(this.step4)},checkInfo:function(){return this.allConfig.filter((function(e){return e.value}))},isAllValid:function(){return this.isValid(this.allConfig)}},methods:{isValid:function(e){return 0===e.filter((function(e){return e.rules&&e.rules.length})).filter((function(e){return!0!==e.rules[0](e.value)})).length},doInstall:function(){var e=this;return o()(r.a.mark((function t(){var a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={},e.allConfig.filter((function(e){return!!e.value})).map((function(e){a[e.key]=e.value})),t.prev=2,v["a"].show({message:"正在安装"}),t.next=6,e.$apis.install.do(a);case 6:m["a"].create(m["b"].ConfirmDialog,{title:"安装成功"}),e.$router.push("/"),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](2),v["a"].hide(),t.t0.response&&400===t.t0.response.status?t.t0.response.data.data.path&&(e.serverHexoRoot=t.t0.response.data.data.path,m["a"].create(m["b"].ConfirmDialog,{title:"安装尝试失败",message:"请更改HEXO_ROOT\n".concat(e.serverHexoRoot,"不是有效的hexo博客"),okLabel:"确定"})):f["a"].error({message:"安装尝试失败",caption:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))()}}},x=b,h=(a("5985"),a("2877")),k=a("eebe"),w=a.n(k),y=a("54e1"),C=a("f531"),q=a("87fe"),g=a("27f9"),_=a("0016"),E=a("b19c"),S=a("9c40"),R=Object(h["a"])(x,s,n,!1,null,"7f6055e1",null);t["default"]=R.exports;w()(R,"components",{QBanner:y["a"],QStepper:C["a"],QStep:q["a"],QInput:g["a"],QIcon:_["a"],QStepperNavigation:E["a"],QBtn:S["a"]})}}]);